[{"SourceCode":"/*\r\n  Copyright 2019 Swap Holdings Ltd.\r\n\r\n  Licensed under the Apache License, Version 2.0 (the \u0022License\u0022);\r\n  you may not use this file except in compliance with the License.\r\n  You may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n  Unless required by applicable law or agreed to in writing, software\r\n  distributed under the License is distributed on an \u0022AS IS\u0022 BASIS,\r\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n  See the License for the specific language governing permissions and\r\n  limitations under the License.\r\n*/\r\n\r\npragma solidity 0.5.10;\r\npragma experimental ABIEncoderV2;\r\n\r\n/**\r\n  * @title Types: Library of Swap Protocol Types and Hashes\r\n  */\r\nlibrary Types {\r\n\r\n  bytes constant internal EIP191_HEADER = \u0022\\x19\\x01\u0022;\r\n\r\n  struct Order {\r\n    uint256 nonce;        // Unique per order and should be sequential\r\n    uint256 expiry;       // Expiry in seconds since 1 January 1970\r\n    Party maker;          // Party to the trade that sets terms\r\n    Party taker;          // Party to the trade that accepts terms\r\n    Party affiliate;      // Party compensated for facilitating (optional)\r\n    Signature signature;  // Signature of the order\r\n  }\r\n\r\n  struct Party {\r\n    address wallet;       // Wallet address of the party\r\n    address token;        // Contract address of the token\r\n    uint256 param;        // Value (ERC-20) or ID (ERC-721)\r\n    bytes4 kind;          // Interface ID of the token\r\n  }\r\n\r\n  struct Signature {\r\n    address signer;       // Address of the wallet used to sign\r\n    uint8 v;              // \u0060v\u0060 value of an ECDSA signature\r\n    bytes32 r;            // \u0060r\u0060 value of an ECDSA signature\r\n    bytes32 s;            // \u0060s\u0060 value of an ECDSA signature\r\n    bytes1 version;       // EIP-191 signature version\r\n  }\r\n\r\n  bytes32 constant DOMAIN_TYPEHASH = keccak256(abi.encodePacked(\r\n    \u0022EIP712Domain(\u0022,\r\n    \u0022string name,\u0022,\r\n    \u0022string version,\u0022,\r\n    \u0022address verifyingContract\u0022,\r\n    \u0022)\u0022\r\n  ));\r\n\r\n  bytes32 constant ORDER_TYPEHASH = keccak256(abi.encodePacked(\r\n    \u0022Order(\u0022,\r\n    \u0022uint256 nonce,\u0022,\r\n    \u0022uint256 expiry,\u0022,\r\n    \u0022Party maker,\u0022,\r\n    \u0022Party taker,\u0022,\r\n    \u0022Party affiliate\u0022,\r\n    \u0022)\u0022,\r\n    \u0022Party(\u0022,\r\n    \u0022address wallet,\u0022,\r\n    \u0022address token,\u0022,\r\n    \u0022uint256 param,\u0022,\r\n    \u0022bytes4 kind\u0022,\r\n    \u0022)\u0022\r\n  ));\r\n\r\n  bytes32 constant PARTY_TYPEHASH = keccak256(abi.encodePacked(\r\n    \u0022Party(\u0022,\r\n    \u0022address wallet,\u0022,\r\n    \u0022address token,\u0022,\r\n    \u0022uint256 param,\u0022,\r\n    \u0022bytes4 kind\u0022,\r\n    \u0022)\u0022\r\n  ));\r\n\r\n  /**\r\n    * @notice Hash an order into bytes32\r\n    * @dev EIP-191 header and domain separator included\r\n    * @param _order Order\r\n    * @param _domainSeparator bytes32\r\n    * @return bytes32 returns a keccak256 abi.encodePacked value\r\n    */\r\n  function hashOrder(\r\n    Order calldata _order,\r\n    bytes32 _domainSeparator\r\n  ) external pure returns (bytes32) {\r\n    return keccak256(abi.encodePacked(\r\n      EIP191_HEADER,\r\n      _domainSeparator,\r\n      keccak256(abi.encode(\r\n        ORDER_TYPEHASH,\r\n        _order.nonce,\r\n        _order.expiry,\r\n        keccak256(abi.encode(\r\n          PARTY_TYPEHASH,\r\n          _order.maker.wallet,\r\n          _order.maker.token,\r\n          _order.maker.param,\r\n          _order.maker.kind\r\n        )),\r\n        keccak256(abi.encode(\r\n          PARTY_TYPEHASH,\r\n          _order.taker.wallet,\r\n          _order.taker.token,\r\n          _order.taker.param,\r\n          _order.taker.kind\r\n        )),\r\n        keccak256(abi.encode(\r\n          PARTY_TYPEHASH,\r\n          _order.affiliate.wallet,\r\n          _order.affiliate.token,\r\n          _order.affiliate.param,\r\n          _order.affiliate.kind\r\n        ))\r\n      ))\r\n    ));\r\n  }\r\n\r\n  /**\r\n    * @notice Hash domain parameters into bytes32\r\n    * @dev Used for signature validation (EIP-712)\r\n    * @param _name bytes\r\n    * @param _version bytes\r\n    * @param _verifyingContract address\r\n    * @return bytes32 returns a keccak256 abi.encodePacked value\r\n    */\r\n  function hashDomain(\r\n    bytes calldata _name,\r\n    bytes calldata _version,\r\n    address _verifyingContract\r\n  ) external pure returns (bytes32) {\r\n    return keccak256(abi.encode(\r\n      DOMAIN_TYPEHASH,\r\n      keccak256(_name),\r\n      keccak256(_version),\r\n      _verifyingContract\r\n    ));\r\n  }\r\n\r\n}","ABI":"[{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022components\u0022:[{\u0022name\u0022:\u0022nonce\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022expiry\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022components\u0022:[{\u0022name\u0022:\u0022wallet\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022token\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022param\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022kind\u0022,\u0022type\u0022:\u0022bytes4\u0022}],\u0022name\u0022:\u0022maker\u0022,\u0022type\u0022:\u0022tuple\u0022},{\u0022components\u0022:[{\u0022name\u0022:\u0022wallet\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022token\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022param\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022kind\u0022,\u0022type\u0022:\u0022bytes4\u0022}],\u0022name\u0022:\u0022taker\u0022,\u0022type\u0022:\u0022tuple\u0022},{\u0022components\u0022:[{\u0022name\u0022:\u0022wallet\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022token\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022param\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022kind\u0022,\u0022type\u0022:\u0022bytes4\u0022}],\u0022name\u0022:\u0022affiliate\u0022,\u0022type\u0022:\u0022tuple\u0022},{\u0022components\u0022:[{\u0022name\u0022:\u0022signer\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022v\u0022,\u0022type\u0022:\u0022uint8\u0022},{\u0022name\u0022:\u0022r\u0022,\u0022type\u0022:\u0022bytes32\u0022},{\u0022name\u0022:\u0022s\u0022,\u0022type\u0022:\u0022bytes32\u0022},{\u0022name\u0022:\u0022version\u0022,\u0022type\u0022:\u0022bytes1\u0022}],\u0022name\u0022:\u0022signature\u0022,\u0022type\u0022:\u0022tuple\u0022}],\u0022name\u0022:\u0022_order\u0022,\u0022type\u0022:\u0022tuple\u0022},{\u0022name\u0022:\u0022_domainSeparator\u0022,\u0022type\u0022:\u0022bytes32\u0022}],\u0022name\u0022:\u0022hashOrder\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022bytes32\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022pure\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_name\u0022,\u0022type\u0022:\u0022bytes\u0022},{\u0022name\u0022:\u0022_version\u0022,\u0022type\u0022:\u0022bytes\u0022},{\u0022name\u0022:\u0022_verifyingContract\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022hashDomain\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022bytes32\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022pure\u0022,\u0022type\u0022:\u0022function\u0022}]","ContractName":"Types","CompilerVersion":"v0.5.10\u002Bcommit.5a6ea5b1","OptimizationUsed":"0","Runs":"200","ConstructorArguments":"","Library":"","SwarmSource":"bzzr://7a367b4f82125c94aa43149f505a8a9d31b07705b668be9c0803101bc0234ced"}]