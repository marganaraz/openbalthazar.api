[{"SourceCode":"// Lowest version pragma solidity 0.4.16 compiled with 0.4.19\r\npragma solidity ^0.4.16;\r\n\r\n// copyright contact@EtherMon.io\r\n\r\ncontract SafeMath {\r\n\r\n    /* function assert(bool assertion) internal { */\r\n    /*   if (!assertion) { */\r\n    /*     throw; */\r\n    /*   } */\r\n    /* }      // assert no longer needed once solidity is on 0.4.10 */\r\n\r\n    function safeAdd(uint256 x, uint256 y) pure internal returns(uint256) {\r\n      uint256 z = x \u002B y;\r\n      assert((z \u003E= x) \u0026\u0026 (z \u003E= y));\r\n      return z;\r\n    }\r\n\r\n    function safeSubtract(uint256 x, uint256 y) pure internal returns(uint256) {\r\n      assert(x \u003E= y);\r\n      uint256 z = x - y;\r\n      return z;\r\n    }\r\n\r\n    function safeMult(uint256 x, uint256 y) pure internal returns(uint256) {\r\n      uint256 z = x * y;\r\n      assert((x == 0)||(z/x == y));\r\n      return z;\r\n    }\r\n\r\n}\r\n\r\ncontract BasicAccessControl {\r\n    address public owner;\r\n    // address[] public moderators;\r\n    uint16 public totalModerators = 0;\r\n    mapping (address =\u003E bool) public moderators;\r\n    bool public isMaintaining = false;\r\n\r\n    function BasicAccessControl() public {\r\n        owner = msg.sender;\r\n    }\r\n\r\n    modifier onlyOwner {\r\n        require(msg.sender == owner);\r\n        _;\r\n    }\r\n\r\n    modifier onlyModerators() {\r\n        require(msg.sender == owner || moderators[msg.sender] == true);\r\n        _;\r\n    }\r\n\r\n    modifier isActive {\r\n        require(!isMaintaining);\r\n        _;\r\n    }\r\n\r\n    function ChangeOwner(address _newOwner) onlyOwner public {\r\n        if (_newOwner != address(0)) {\r\n            owner = _newOwner;\r\n        }\r\n    }\r\n\r\n\r\n    function AddModerator(address _newModerator) onlyOwner public {\r\n        if (moderators[_newModerator] == false) {\r\n            moderators[_newModerator] = true;\r\n            totalModerators \u002B= 1;\r\n        }\r\n    }\r\n    \r\n    function RemoveModerator(address _oldModerator) onlyOwner public {\r\n        if (moderators[_oldModerator] == true) {\r\n            moderators[_oldModerator] = false;\r\n            totalModerators -= 1;\r\n        }\r\n    }\r\n\r\n    function UpdateMaintaining(bool _isMaintaining) onlyOwner public {\r\n        isMaintaining = _isMaintaining;\r\n    }\r\n}\r\n\r\ncontract EtheremonEnum {\r\n\r\n    enum ResultCode {\r\n        SUCCESS,\r\n        ERROR_CLASS_NOT_FOUND,\r\n        ERROR_LOW_BALANCE,\r\n        ERROR_SEND_FAIL,\r\n        ERROR_NOT_TRAINER,\r\n        ERROR_NOT_ENOUGH_MONEY,\r\n        ERROR_INVALID_AMOUNT,\r\n        ERROR_OBJ_NOT_FOUND,\r\n        ERROR_OBJ_INVALID_OWNERSHIP\r\n    }\r\n    \r\n    enum ArrayType {\r\n        CLASS_TYPE,\r\n        STAT_STEP,\r\n        STAT_START,\r\n        STAT_BASE,\r\n        OBJ_SKILL\r\n    }\r\n}\r\n\r\ncontract EtheremonDataBase is EtheremonEnum, BasicAccessControl, SafeMath {\r\n    \r\n    uint64 public totalMonster;\r\n    uint32 public totalClass;\r\n    \r\n    // write\r\n    function addElementToArrayType(ArrayType _type, uint64 _id, uint8 _value) onlyModerators public returns(uint);\r\n    function removeElementOfArrayType(ArrayType _type, uint64 _id, uint8 _value) onlyModerators public returns(uint);\r\n    function setMonsterClass(uint32 _classId, uint256 _price, uint256 _returnPrice, bool _catchable) onlyModerators public returns(uint32);\r\n    function addMonsterObj(uint32 _classId, address _trainer, string _name) onlyModerators public returns(uint64);\r\n    function setMonsterObj(uint64 _objId, string _name, uint32 _exp, uint32 _createIndex, uint32 _lastClaimIndex) onlyModerators public;\r\n    function increaseMonsterExp(uint64 _objId, uint32 amount) onlyModerators public;\r\n    function decreaseMonsterExp(uint64 _objId, uint32 amount) onlyModerators public;\r\n    function removeMonsterIdMapping(address _trainer, uint64 _monsterId) onlyModerators public;\r\n    function addMonsterIdMapping(address _trainer, uint64 _monsterId) onlyModerators public;\r\n    function clearMonsterReturnBalance(uint64 _monsterId) onlyModerators public returns(uint256 amount);\r\n    function collectAllReturnBalance(address _trainer) onlyModerators public returns(uint256 amount);\r\n    function transferMonster(address _from, address _to, uint64 _monsterId) onlyModerators public returns(ResultCode);\r\n    function addExtraBalance(address _trainer, uint256 _amount) onlyModerators public returns(uint256);\r\n    function deductExtraBalance(address _trainer, uint256 _amount) onlyModerators public returns(uint256);\r\n    function setExtraBalance(address _trainer, uint256 _amount) onlyModerators public;\r\n    \r\n    // read\r\n    function getSizeArrayType(ArrayType _type, uint64 _id) constant public returns(uint);\r\n    function getElementInArrayType(ArrayType _type, uint64 _id, uint _index) constant public returns(uint8);\r\n    function getMonsterClass(uint32 _classId) constant public returns(uint32 classId, uint256 price, uint256 returnPrice, uint32 total, bool catchable);\r\n    function getMonsterObj(uint64 _objId) constant public returns(uint64 objId, uint32 classId, address trainer, uint32 exp, uint32 createIndex, uint32 lastClaimIndex, uint createTime);\r\n    function getMonsterName(uint64 _objId) constant public returns(string name);\r\n    function getExtraBalance(address _trainer) constant public returns(uint256);\r\n    function getMonsterDexSize(address _trainer) constant public returns(uint);\r\n    function getMonsterObjId(address _trainer, uint index) constant public returns(uint64);\r\n    function getExpectedBalance(address _trainer) constant public returns(uint256);\r\n    function getMonsterReturn(uint64 _objId) constant public returns(uint256 current, uint256 total);\r\n}\r\n\r\ninterface EtheremonBattleInterface {\r\n    function isOnBattle(uint64 _objId) constant external returns(bool) ;\r\n}\r\n\r\ninterface EtheremonMonsterNFTInterface {\r\n   function triggerTransferEvent(address _from, address _to, uint _tokenId) external;\r\n   function getMonsterCP(uint64 _monsterId) constant external returns(uint cp);\r\n}\r\n\r\ncontract EtheremonTradeData is BasicAccessControl {\r\n    struct BorrowItem {\r\n        uint index;\r\n        address owner;\r\n        address borrower;\r\n        uint price;\r\n        bool lent;\r\n        uint releaseTime;\r\n        uint createTime;\r\n    }\r\n    \r\n    struct SellingItem {\r\n        uint index;\r\n        uint price;\r\n        uint createTime;\r\n    }\r\n\r\n    mapping(uint =\u003E SellingItem) public sellingDict; // monster id =\u003E item\r\n    uint[] public sellingList; // monster id\r\n    \r\n    mapping(uint =\u003E BorrowItem) public borrowingDict;\r\n    uint[] public borrowingList;\r\n\r\n    mapping(address =\u003E uint[]) public lendingList;\r\n    \r\n    function removeSellingItem(uint _itemId) onlyModerators external {\r\n        SellingItem storage item = sellingDict[_itemId];\r\n        if (item.index == 0)\r\n            return;\r\n        \r\n        if (item.index \u003C= sellingList.length) {\r\n            // Move an existing element into the vacated key slot.\r\n            sellingDict[sellingList[sellingList.length-1]].index = item.index;\r\n            sellingList[item.index-1] = sellingList[sellingList.length-1];\r\n            sellingList.length -= 1;\r\n            delete sellingDict[_itemId];\r\n        }\r\n    }\r\n    \r\n    function addSellingItem(uint _itemId, uint _price, uint _createTime) onlyModerators external {\r\n        SellingItem storage item = sellingDict[_itemId];\r\n        item.price = _price;\r\n        item.createTime = _createTime;\r\n        \r\n        if (item.index == 0) {\r\n            item.index = \u002B\u002BsellingList.length;\r\n            sellingList[item.index - 1] = _itemId;\r\n        }\r\n    }\r\n    \r\n    function removeBorrowingItem(uint _itemId) onlyModerators external {\r\n        BorrowItem storage item = borrowingDict[_itemId];\r\n        if (item.index == 0)\r\n            return;\r\n        \r\n        if (item.index \u003C= borrowingList.length) {\r\n            // Move an existing element into the vacated key slot.\r\n            borrowingDict[borrowingList[borrowingList.length-1]].index = item.index;\r\n            borrowingList[item.index-1] = borrowingList[borrowingList.length-1];\r\n            borrowingList.length -= 1;\r\n            delete borrowingDict[_itemId];\r\n        }\r\n    }\r\n\r\n    function addBorrowingItem(address _owner, uint _itemId, uint _price, address _borrower, bool _lent, uint _releaseTime, uint _createTime) onlyModerators external {\r\n        BorrowItem storage item = borrowingDict[_itemId];\r\n        item.owner = _owner;\r\n        item.borrower = _borrower;\r\n        item.price = _price;\r\n        item.lent = _lent;\r\n        item.releaseTime = _releaseTime;\r\n        item.createTime = _createTime;\r\n        \r\n        if (item.index == 0) {\r\n            item.index = \u002B\u002BborrowingList.length;\r\n            borrowingList[item.index - 1] = _itemId;\r\n        }\r\n    }\r\n    \r\n    function addItemLendingList(address _trainer, uint _objId) onlyModerators external {\r\n        lendingList[_trainer].push(_objId);\r\n    }\r\n    \r\n    function removeItemLendingList(address _trainer, uint _objId) onlyModerators external {\r\n        uint foundIndex = 0;\r\n        uint[] storage objList = lendingList[_trainer];\r\n        for (; foundIndex \u003C objList.length; foundIndex\u002B\u002B) {\r\n            if (objList[foundIndex] == _objId) {\r\n                break;\r\n            }\r\n        }\r\n        if (foundIndex \u003C objList.length) {\r\n            objList[foundIndex] = objList[objList.length-1];\r\n            delete objList[objList.length-1];\r\n            objList.length--;\r\n        }\r\n    }\r\n\r\n    // read access\r\n    function isOnBorrow(uint _objId) constant external returns(bool) {\r\n        return (borrowingDict[_objId].index \u003E 0);\r\n    }\r\n    \r\n    function isOnSell(uint _objId) constant external returns(bool) {\r\n        return (sellingDict[_objId].index \u003E 0);\r\n    }\r\n    \r\n    function isOnLent(uint _objId) constant external returns(bool) {\r\n        return borrowingDict[_objId].lent;\r\n    }\r\n    \r\n    function getSellPrice(uint _objId) constant external returns(uint) {\r\n        return sellingDict[_objId].price;\r\n    }\r\n    \r\n    function isOnTrade(uint _objId) constant external returns(bool) {\r\n        return ((borrowingDict[_objId].index \u003E 0) || (sellingDict[_objId].index \u003E 0)); \r\n    }\r\n    \r\n    function getBorrowBasicInfo(uint _objId) constant external returns(address owner, bool lent) {\r\n        BorrowItem storage borrowItem = borrowingDict[_objId];\r\n        return (borrowItem.owner, borrowItem.lent);\r\n    }\r\n    \r\n    function getBorrowInfo(uint _objId) constant external returns(uint index, address owner, address borrower, uint price, bool lent, uint createTime, uint releaseTime) {\r\n        BorrowItem storage borrowItem = borrowingDict[_objId];\r\n        return (borrowItem.index, borrowItem.owner, borrowItem.borrower, borrowItem.price, borrowItem.lent, borrowItem.createTime, borrowItem.releaseTime);\r\n    }\r\n    \r\n    function getSellInfo(uint _objId) constant external returns(uint index, uint price, uint createTime) {\r\n        SellingItem storage item = sellingDict[_objId];\r\n        return (item.index, item.price, item.createTime);\r\n    }\r\n    \r\n    function getTotalSellingItem() constant external returns(uint) {\r\n        return sellingList.length;\r\n    }\r\n    \r\n    function getTotalBorrowingItem() constant external returns(uint) {\r\n        return borrowingList.length;\r\n    }\r\n    \r\n    function getTotalLendingItem(address _trainer) constant external returns(uint) {\r\n        return lendingList[_trainer].length;\r\n    }\r\n    \r\n    function getSellingInfoByIndex(uint _index) constant external returns(uint objId, uint price, uint createTime) {\r\n        objId = sellingList[_index];\r\n        SellingItem storage item = sellingDict[objId];\r\n        price = item.price;\r\n        createTime = item.createTime;\r\n    }\r\n    \r\n    function getBorrowInfoByIndex(uint _index) constant external returns(uint objId, address owner, address borrower, uint price, bool lent, uint createTime, uint releaseTime) {\r\n        objId = borrowingList[_index];\r\n        BorrowItem storage borrowItem = borrowingDict[objId];\r\n        return (objId, borrowItem.owner, borrowItem.borrower, borrowItem.price, borrowItem.lent, borrowItem.createTime, borrowItem.releaseTime);\r\n    }\r\n    \r\n    function getLendingObjId(address _trainer, uint _index) constant external returns(uint) {\r\n        return lendingList[_trainer][_index];\r\n    }\r\n    \r\n    function getLendingInfo(address _trainer, uint _index) constant external returns(uint objId, address owner, address borrower, uint price, bool lent, uint createTime, uint releaseTime) {\r\n        objId = lendingList[_trainer][_index];\r\n        BorrowItem storage borrowItem = borrowingDict[objId];\r\n        return (objId, borrowItem.owner, borrowItem.borrower, borrowItem.price, borrowItem.lent, borrowItem.createTime, borrowItem.releaseTime);\r\n    }\r\n    \r\n    function getTradingInfo(uint _objId) constant external returns(uint sellingPrice, uint lendingPrice, bool lent, uint releaseTime, address owner, address borrower) {\r\n        SellingItem storage item = sellingDict[_objId];\r\n        sellingPrice = item.price;\r\n        BorrowItem storage borrowItem = borrowingDict[_objId];\r\n        lendingPrice = borrowItem.price;\r\n        lent = borrowItem.lent;\r\n        releaseTime = borrowItem.releaseTime;\r\n        owner = borrowItem.owner;\r\n        borrower = borrower;\r\n    }\r\n}\r\n\r\ncontract EtheremonTrade is EtheremonEnum, BasicAccessControl, SafeMath {\r\n    \r\n    uint8 constant public GEN0_NO = 24;\r\n\r\n    struct MonsterClassAcc {\r\n        uint32 classId;\r\n        uint256 price;\r\n        uint256 returnPrice;\r\n        uint32 total;\r\n        bool catchable;\r\n    }\r\n\r\n    struct MonsterObjAcc {\r\n        uint64 monsterId;\r\n        uint32 classId;\r\n        address trainer;\r\n        string name;\r\n        uint32 exp;\r\n        uint32 createIndex;\r\n        uint32 lastClaimIndex;\r\n        uint createTime;\r\n    }\r\n    \r\n    // Gen0 has return price \u0026 no longer can be caught when this contract is deployed\r\n    struct Gen0Config {\r\n        uint32 classId;\r\n        uint256 originalPrice;\r\n        uint256 returnPrice;\r\n        uint32 total; // total caught (not count those from eggs)\r\n    }\r\n    \r\n    struct BorrowItem {\r\n        uint index;\r\n        address owner;\r\n        address borrower;\r\n        uint price;\r\n        bool lent;\r\n        uint releaseTime;\r\n        uint createTime;\r\n    }\r\n    \r\n    // data contract\r\n    address public dataContract;\r\n    address public battleContract;\r\n    address public tradingMonDataContract;\r\n    address public monsterNFTContract;\r\n    \r\n    mapping(uint32 =\u003E Gen0Config) public gen0Config;\r\n    \r\n    // trading fee\r\n    uint16 public tradingFeePercentage = 3;\r\n    \r\n    // event\r\n    event EventPlaceSellOrder(address indexed seller, uint objId, uint price);\r\n    event EventRemoveSellOrder(address indexed seller, uint objId);\r\n    event EventCompleteSellOrder(address indexed seller, address indexed buyer, uint objId, uint price);\r\n    event EventOfferBorrowingItem(address indexed lender, uint objId, uint price, uint releaseTime);\r\n    event EventRemoveOfferBorrowingItem(address indexed lender, uint objId);\r\n    event EventAcceptBorrowItem(address indexed lender, address indexed borrower, uint objId, uint price);\r\n    event EventGetBackItem(address indexed lender, address indexed borrower, uint objId);\r\n    \r\n    // constructor\r\n    function EtheremonTrade(address _dataContract, address _battleContract, address _tradingMonDataContract, address _monsterNFTContract) public {\r\n        dataContract = _dataContract;\r\n        battleContract = _battleContract;\r\n        tradingMonDataContract = _tradingMonDataContract;\r\n        monsterNFTContract = _monsterNFTContract;\r\n    }\r\n    \r\n     // admin \u0026 moderators\r\n    function setOriginalPriceGen0() onlyModerators public {\r\n        gen0Config[1] = Gen0Config(1, 0.3 ether, 0.003 ether, 374);\r\n        gen0Config[2] = Gen0Config(2, 0.3 ether, 0.003 ether, 408);\r\n        gen0Config[3] = Gen0Config(3, 0.3 ether, 0.003 ether, 373);\r\n        gen0Config[4] = Gen0Config(4, 0.2 ether, 0.002 ether, 437);\r\n        gen0Config[5] = Gen0Config(5, 0.1 ether, 0.001 ether, 497);\r\n        gen0Config[6] = Gen0Config(6, 0.3 ether, 0.003 ether, 380); \r\n        gen0Config[7] = Gen0Config(7, 0.2 ether, 0.002 ether, 345);\r\n        gen0Config[8] = Gen0Config(8, 0.1 ether, 0.001 ether, 518); \r\n        gen0Config[9] = Gen0Config(9, 0.1 ether, 0.001 ether, 447);\r\n        gen0Config[10] = Gen0Config(10, 0.2 ether, 0.002 ether, 380); \r\n        gen0Config[11] = Gen0Config(11, 0.2 ether, 0.002 ether, 354);\r\n        gen0Config[12] = Gen0Config(12, 0.2 ether, 0.002 ether, 346);\r\n        gen0Config[13] = Gen0Config(13, 0.2 ether, 0.002 ether, 351); \r\n        gen0Config[14] = Gen0Config(14, 0.2 ether, 0.002 ether, 338);\r\n        gen0Config[15] = Gen0Config(15, 0.2 ether, 0.002 ether, 341);\r\n        gen0Config[16] = Gen0Config(16, 0.35 ether, 0.0035 ether, 384);\r\n        gen0Config[17] = Gen0Config(17, 1 ether, 0.01 ether, 305); \r\n        gen0Config[18] = Gen0Config(18, 0.1 ether, 0.001 ether, 427);\r\n        gen0Config[19] = Gen0Config(19, 1 ether, 0.01 ether, 304);\r\n        gen0Config[20] = Gen0Config(20, 0.4 ether, 0.05 ether, 82);\r\n        gen0Config[21] = Gen0Config(21, 1, 1, 123);\r\n        gen0Config[22] = Gen0Config(22, 0.2 ether, 0.001 ether, 468);\r\n        gen0Config[23] = Gen0Config(23, 0.5 ether, 0.0025 ether, 302);\r\n        gen0Config[24] = Gen0Config(24, 1 ether, 0.005 ether, 195);\r\n    }\r\n    \r\n    function setContract(address _dataContract, address _battleContract, address _tradingMonDataContract, address _monsterNFTContract) onlyModerators public {\r\n        dataContract = _dataContract;\r\n        battleContract = _battleContract;\r\n        tradingMonDataContract = _tradingMonDataContract;\r\n        monsterNFTContract = _monsterNFTContract;\r\n    }\r\n    \r\n    function updateConfig(uint16 _fee) onlyModerators public {\r\n        tradingFeePercentage = _fee;\r\n    }\r\n    \r\n    function withdrawEther(address _sendTo, uint _amount) onlyModerators public {\r\n        // no user money is kept in this contract, only trasaction fee\r\n        if (_amount \u003E this.balance) {\r\n            revert();\r\n        }\r\n        _sendTo.transfer(_amount);\r\n    }\r\n\r\n    function _triggerNFTEvent(address _from, address _to, uint _objId) internal {\r\n        EtheremonMonsterNFTInterface monsterNFT = EtheremonMonsterNFTInterface(monsterNFTContract);\r\n        monsterNFT.triggerTransferEvent(_from, _to, _objId);\r\n    }\r\n    \r\n    // public\r\n    function placeSellOrder(uint _objId, uint _price) isActive external {\r\n        if (_price == 0)\r\n            revert();\r\n        \r\n        // not on borrowing\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        if (monTradeData.isOnBorrow(_objId))\r\n            revert();\r\n\r\n        // not on battle \r\n        EtheremonBattleInterface battle = EtheremonBattleInterface(battleContract);\r\n        if (battle.isOnBattle(uint64(_objId)))\r\n            revert();\r\n        \r\n        // check ownership\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, obj.classId, obj.trainer, obj.exp, obj.createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(uint64(_objId));\r\n\r\n        if (obj.trainer != msg.sender) {\r\n            revert();\r\n        }\r\n        \r\n        monTradeData.addSellingItem(_objId, _price, block.timestamp);\r\n        EventPlaceSellOrder(msg.sender, _objId, _price);\r\n    }\r\n    \r\n    function removeSellOrder(uint _objId) isActive external {\r\n        // check ownership\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, obj.classId, obj.trainer, obj.exp, obj.createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(uint64(_objId));\r\n\r\n        if (obj.trainer != msg.sender) {\r\n            revert();\r\n        }\r\n        \r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        monTradeData.removeSellingItem(_objId);\r\n        \r\n        EventRemoveSellOrder(msg.sender, _objId);\r\n    }\r\n    \r\n    function buyItem(uint _objId) isActive external payable {\r\n        // check item is valid to sell\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        uint requestPrice = monTradeData.getSellPrice(_objId);\r\n        if (requestPrice == 0 || msg.value != requestPrice) {\r\n            revert();\r\n        }\r\n\r\n        // check obj\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, obj.classId, obj.trainer, obj.exp, obj.createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(uint64(_objId));\r\n        // can not buy from yourself\r\n        if (obj.monsterId == 0 || obj.trainer == msg.sender) {\r\n            revert();\r\n        }\r\n        \r\n        EtheremonMonsterNFTInterface monsterNFT = EtheremonMonsterNFTInterface(monsterNFTContract);\r\n\r\n        uint fee = requestPrice * tradingFeePercentage / 100;\r\n        monTradeData.removeSellingItem(_objId);\r\n        \r\n        // transfer owner\r\n        data.removeMonsterIdMapping(obj.trainer, obj.monsterId);\r\n        data.addMonsterIdMapping(msg.sender, obj.monsterId);\r\n        monsterNFT.triggerTransferEvent(obj.trainer, msg.sender, _objId);\r\n        \r\n        // transfer money\r\n        obj.trainer.transfer(safeSubtract(requestPrice, fee));\r\n        \r\n        EventCompleteSellOrder(obj.trainer, msg.sender, _objId, requestPrice);\r\n    }\r\n    \r\n    function offerBorrowingItem(uint _objId, uint _price, uint _releaseTime) isActive external {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        if (monTradeData.isOnSell(_objId) || monTradeData.isOnLent(_objId)) revert();\r\n\r\n         // check ownership\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, obj.classId, obj.trainer, obj.exp, obj.createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(uint64(_objId));\r\n\r\n        if (obj.trainer != msg.sender) {\r\n            revert();\r\n        }\r\n\r\n        // not on battle \r\n        EtheremonBattleInterface battle = EtheremonBattleInterface(battleContract);\r\n        if (battle.isOnBattle(obj.monsterId))\r\n            revert();\r\n        \r\n        monTradeData.addBorrowingItem(msg.sender, _objId, _price, address(0), false, _releaseTime, block.timestamp);\r\n        EventOfferBorrowingItem(msg.sender, _objId, _price, _releaseTime);\r\n    }\r\n    \r\n    function removeBorrowingOfferItem(uint _objId) isActive external {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        address owner;\r\n        bool lent;\r\n        (owner, lent) = monTradeData.getBorrowBasicInfo(_objId);\r\n        if (owner != msg.sender || lent == true)\r\n            revert();\r\n        \r\n        monTradeData.removeBorrowingItem(_objId);\r\n        EventRemoveOfferBorrowingItem(msg.sender, _objId);\r\n    }\r\n    \r\n    function borrowItem(uint _objId) isActive external payable {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        BorrowItem memory borrowItem;\r\n        (borrowItem.index, borrowItem.owner, borrowItem.borrower, borrowItem.price, borrowItem.lent, borrowItem.createTime, borrowItem.releaseTime) = monTradeData.getBorrowInfo(_objId);\r\n        if (borrowItem.index == 0 || borrowItem.lent == true) revert();\r\n        if (borrowItem.owner == msg.sender) revert(); // can not borrow from yourself\r\n        if (borrowItem.price != msg.value)\r\n            revert();\r\n\r\n        // check obj\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, obj.classId, obj.trainer, obj.exp, obj.createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(uint64(_objId));\r\n        if (obj.trainer != borrowItem.owner) {\r\n            revert();\r\n        }\r\n        \r\n        // update borrow data\r\n        monTradeData.addBorrowingItem(borrowItem.owner, _objId, borrowItem.price, msg.sender, true, (borrowItem.releaseTime \u002B block.timestamp), borrowItem.createTime);\r\n        \r\n        data.removeMonsterIdMapping(obj.trainer, obj.monsterId);\r\n        data.addMonsterIdMapping(msg.sender, obj.monsterId);\r\n        _triggerNFTEvent(obj.trainer, msg.sender, _objId);\r\n        \r\n        obj.trainer.transfer(safeSubtract(borrowItem.price, borrowItem.price * tradingFeePercentage / 100));\r\n        monTradeData.addItemLendingList(obj.trainer, _objId);\r\n        EventAcceptBorrowItem(obj.trainer, msg.sender, _objId, borrowItem.price);\r\n    }\r\n    \r\n    function getBackLendingItem(uint64 _objId) isActive external {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        BorrowItem memory borrowItem;\r\n        (borrowItem.index, borrowItem.owner, borrowItem.borrower, borrowItem.price, borrowItem.lent, borrowItem.createTime, borrowItem.releaseTime) = monTradeData.getBorrowInfo(_objId);\r\n        \r\n        if (borrowItem.index == 0)\r\n            revert();\r\n        if (borrowItem.lent == false)\r\n            revert();\r\n        if (borrowItem.releaseTime \u003E block.timestamp)\r\n            revert();\r\n        \r\n        if (msg.sender != borrowItem.owner)\r\n            revert();\r\n        \r\n        monTradeData.removeBorrowingItem(_objId);\r\n        \r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        data.removeMonsterIdMapping(borrowItem.borrower, _objId);\r\n        data.addMonsterIdMapping(msg.sender, _objId);\r\n        EtheremonMonsterNFTInterface monsterNFT = EtheremonMonsterNFTInterface(monsterNFTContract);\r\n        monsterNFT.triggerTransferEvent(borrowItem.borrower, msg.sender, _objId);\r\n        \r\n        monTradeData.removeItemLendingList(msg.sender, _objId);\r\n        EventGetBackItem(msg.sender, borrowItem.borrower, _objId);\r\n    }\r\n    \r\n    // read access\r\n    function getObjInfoWithBp(uint64 _objId) constant public returns(address owner, uint32 classId, uint32 exp, uint32 createIndex, uint bp) {\r\n        EtheremonDataBase data = EtheremonDataBase(dataContract);\r\n        MonsterObjAcc memory obj;\r\n        (obj.monsterId, classId, owner, exp, createIndex, obj.lastClaimIndex, obj.createTime) = data.getMonsterObj(_objId);\r\n        EtheremonMonsterNFTInterface monsterNFT = EtheremonMonsterNFTInterface(monsterNFTContract);\r\n        bp = monsterNFT.getMonsterCP(_objId);\r\n    }\r\n    \r\n    function getTotalSellingMonsters() constant external returns(uint) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        return monTradeData.getTotalSellingItem();\r\n    }\r\n    \r\n    function getTotalBorrowingMonsters() constant external returns(uint) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        return monTradeData.getTotalBorrowingItem();\r\n    }\r\n\r\n    function getSellingItem(uint _index) constant external returns(uint objId, uint32 classId, uint32 exp, uint bp, address trainer, uint32 createIndex, uint256 price, uint createTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        (objId, price, createTime) = monTradeData.getSellingInfoByIndex(_index);\r\n        if (objId \u003E 0) {\r\n            (trainer, classId, exp, createIndex, bp) = getObjInfoWithBp(uint64(objId));\r\n        }\r\n    }\r\n    \r\n    function getSellingItemByObjId(uint64 _objId) constant external returns(uint32 classId, uint32 exp, uint bp, address trainer, uint32 createIndex, uint256 price, uint createTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        uint index;\r\n        (index, price, createTime) = monTradeData.getSellInfo(_objId);\r\n        if (price \u003E 0) {\r\n            (trainer, classId, exp, createIndex, bp) = getObjInfoWithBp(_objId);\r\n        }\r\n    }\r\n\r\n    function getBorrowingItem(uint _index) constant external returns(uint objId, address owner, address borrower, \r\n        uint256 price, bool lent, uint createTime, uint releaseTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);    \r\n        (objId, owner, borrower, price, lent, createTime, releaseTime) = monTradeData.getBorrowInfoByIndex(_index);\r\n    }\r\n    \r\n    function getBorrowingItemByObjId(uint64 _objId) constant external returns(uint index, address owner, address borrower, \r\n        uint256 price, bool lent, uint createTime, uint releaseTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);    \r\n        (index, owner, borrower, price, lent, createTime, releaseTime) = monTradeData.getBorrowInfo(_objId);\r\n    }\r\n    \r\n    \r\n    function getLendingItemLength(address _trainer) constant external returns(uint) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);    \r\n        return monTradeData.getTotalLendingItem(_trainer);\r\n    }\r\n    \r\n    function getLendingItemInfo(address _trainer, uint _index) constant external returns(uint objId, address owner, address borrower, \r\n        uint256 price, bool lent, uint createTime, uint releaseTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        (objId, owner, borrower, price, lent, createTime, releaseTime) = monTradeData.getLendingInfo(_trainer, _index);\r\n    }\r\n    \r\n    function getTradingInfo(uint _objId) constant external returns(address owner, address borrower, uint256 sellingPrice, uint256 lendingPrice, bool lent, uint releaseTime) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        (sellingPrice, lendingPrice, lent, releaseTime, owner, borrower) = monTradeData.getTradingInfo(_objId);\r\n    }\r\n    \r\n    function isOnTrading(uint _objId) constant external returns(bool) {\r\n        EtheremonTradeData monTradeData = EtheremonTradeData(tradingMonDataContract);\r\n        return monTradeData.isOnTrade(_objId);\r\n    }\r\n}","ABI":"[{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022removeSellOrder\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022dataContract\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint32\u0022}],\u0022name\u0022:\u0022gen0Config\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022classId\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022originalPrice\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022returnPrice\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022total\u0022,\u0022type\u0022:\u0022uint32\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint64\u0022}],\u0022name\u0022:\u0022getSellingItemByObjId\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022classId\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022exp\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022bp\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022trainer\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022createIndex\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022createTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022moderators\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022bool\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022getTotalBorrowingMonsters\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022_price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022_releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022offerBorrowingItem\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022removeBorrowingOfferItem\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022monsterNFTContract\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022battleContract\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_isMaintaining\u0022,\u0022type\u0022:\u0022bool\u0022}],\u0022name\u0022:\u0022UpdateMaintaining\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint64\u0022}],\u0022name\u0022:\u0022getBackLendingItem\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022totalModerators\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint16\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint64\u0022}],\u0022name\u0022:\u0022getBorrowingItemByObjId\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022index\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022owner\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022lent\u0022,\u0022type\u0022:\u0022bool\u0022},{\u0022name\u0022:\u0022createTime\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_sendTo\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_amount\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022withdrawEther\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_dataContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_battleContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_tradingMonDataContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_monsterNFTContract\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022setContract\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[],\u0022name\u0022:\u0022setOriginalPriceGen0\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022isOnTrading\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022bool\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_newModerator\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022AddModerator\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022GEN0_NO\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint8\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022tradingMonDataContract\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_index\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022getSellingItem\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022classId\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022exp\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022bp\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022trainer\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022createIndex\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022createTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022getTotalSellingMonsters\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022owner\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_fee\u0022,\u0022type\u0022:\u0022uint16\u0022}],\u0022name\u0022:\u0022updateConfig\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022_price\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022placeSellOrder\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_trainer\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_index\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022getLendingItemInfo\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022owner\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022lent\u0022,\u0022type\u0022:\u0022bool\u0022},{\u0022name\u0022:\u0022createTime\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022tradingFeePercentage\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint16\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_oldModerator\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022RemoveModerator\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_trainer\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022getLendingItemLength\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022getTradingInfo\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022owner\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022sellingPrice\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022lendingPrice\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022lent\u0022,\u0022type\u0022:\u0022bool\u0022},{\u0022name\u0022:\u0022releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022buyItem\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:true,\u0022stateMutability\u0022:\u0022payable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022borrowItem\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:true,\u0022stateMutability\u0022:\u0022payable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[],\u0022name\u0022:\u0022isMaintaining\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022\u0022,\u0022type\u0022:\u0022bool\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:false,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_newOwner\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022name\u0022:\u0022ChangeOwner\u0022,\u0022outputs\u0022:[],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_objId\u0022,\u0022type\u0022:\u0022uint64\u0022}],\u0022name\u0022:\u0022getObjInfoWithBp\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022owner\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022classId\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022exp\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022createIndex\u0022,\u0022type\u0022:\u0022uint32\u0022},{\u0022name\u0022:\u0022bp\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022constant\u0022:true,\u0022inputs\u0022:[{\u0022name\u0022:\u0022_index\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022getBorrowingItem\u0022,\u0022outputs\u0022:[{\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022owner\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022lent\u0022,\u0022type\u0022:\u0022bool\u0022},{\u0022name\u0022:\u0022createTime\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022name\u0022:\u0022releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022view\u0022,\u0022type\u0022:\u0022function\u0022},{\u0022inputs\u0022:[{\u0022name\u0022:\u0022_dataContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_battleContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_tradingMonDataContract\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022name\u0022:\u0022_monsterNFTContract\u0022,\u0022type\u0022:\u0022address\u0022}],\u0022payable\u0022:false,\u0022stateMutability\u0022:\u0022nonpayable\u0022,\u0022type\u0022:\u0022constructor\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022seller\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventPlaceSellOrder\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022seller\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventRemoveSellOrder\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022seller\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:true,\u0022name\u0022:\u0022buyer\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventCompleteSellOrder\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022lender\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022releaseTime\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventOfferBorrowingItem\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022lender\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventRemoveOfferBorrowingItem\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022lender\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:true,\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022price\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventAcceptBorrowItem\u0022,\u0022type\u0022:\u0022event\u0022},{\u0022anonymous\u0022:false,\u0022inputs\u0022:[{\u0022indexed\u0022:true,\u0022name\u0022:\u0022lender\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:true,\u0022name\u0022:\u0022borrower\u0022,\u0022type\u0022:\u0022address\u0022},{\u0022indexed\u0022:false,\u0022name\u0022:\u0022objId\u0022,\u0022type\u0022:\u0022uint256\u0022}],\u0022name\u0022:\u0022EventGetBackItem\u0022,\u0022type\u0022:\u0022event\u0022}]","ContractName":"EtheremonTrade","CompilerVersion":"v0.4.19\u002Bcommit.c4cbbb05","OptimizationUsed":"1","Runs":"200","ConstructorArguments":"000000000000000000000000abc1c404424bdf24c19a5cc5ef8f47781d18eb3e000000000000000000000000022c635044ba01ced1e098bc32e62a954147f2de0000000000000000000000009a376e31f1947c468ca904b4307c8970667e0ec20000000000000000000000005d00d312e171be5342067c09bae883f9bcb2003b","Library":"","SwarmSource":"bzzr://36535baf00b0ba8f5b2289167c86cef795d50f60078ea136641c9289b922aeb5"}]